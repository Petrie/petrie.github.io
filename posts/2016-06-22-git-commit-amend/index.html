<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Git单步悔棋操作 | Petrie's Site</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Git单步悔棋操作Git commit --amend 处女座的福音"><meta name=generator content="Hugo 0.99.1"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Git单步悔棋操作"><meta property="og:description" content="Git单步悔棋操作Git commit --amend 处女座的福音"><meta property="og:type" content="article"><meta property="og:url" content="https://petrie.github.io/posts/2016-06-22-git-commit-amend/"><meta property="article:section" content="posts"><meta itemprop=name content="Git单步悔棋操作"><meta itemprop=description content="Git单步悔棋操作Git commit --amend 处女座的福音"><meta itemprop=wordCount content="170"><meta itemprop=keywords content="Git,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git单步悔棋操作"><meta name=twitter:description content="Git单步悔棋操作Git commit --amend 处女座的福音"></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Petrie's Site</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">POSTS</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Git单步悔棋操作</h1></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>本篇要点</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Git commit --amend
</span></span></code></pre></div><p>此命令简单来讲，就是Git的悔棋操作，我工作中最常见的场景</p><blockquote><p>1.写完一段代码 Git add，Git commit
2.发现一些注释不够完整，或者发现一些错别字
3.改了后再次 Git add，Git commit
4.完事</p></blockquote><p>这个时候问题就来了，对于一个处女座来说，以上的同一件事情产生了两个commit。强迫症就犯了。辣么学会了Git commit的&ndash;amend参数你就可以解放了。Git commit &ndash;amend可以将本次提交和最后一次提交完美融合。是不是处女座的福音？！</p><p>manpage解释：</p><blockquote><p>&ndash;amend
Replace the tip of the current branch by creating a new commit. The recorded tree is prepared as usual(including the effect of the -i and -o options and explicit pathspec), and the message from the original commitis used as the starting point, instead of an empty message, when no other message is specified from the command line via options such as -m, -F, -c, etc. The new commit has the same parents and author as the current one (the &ndash;reset-author option can countermand this).</p></blockquote><blockquote><p>It is a rough equivalent for:</p><pre><code>                $ Git reset --soft HEAD^
                $ ... do something else to come up with the right tree ...
                $ Git commit -c ORIG_HEAD
</code></pre></blockquote><blockquote><p>but can be used to amend a merge commit.</p></blockquote><blockquote><p>You should understand the implications of rewriting history if you amend a commit that has already been published. (See the &ldquo;RECOVERING FROM UPSTREAM REBASE&rdquo; section in Git-rebase(1).)</p></blockquote><ul class=pa0><li class="list di"><a href=/tags/git class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Git</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/posts/2016-06-28-git%E5%9B%9E%E5%88%B0%E6%9C%AA%E6%9D%A5%E6%97%B6%E9%97%B4%E6%97%85%E8%A1%8C%E4%B8%80/>Git回到未来—时间旅行一</a></li><li class=mb2><a href=/posts/2016-06-23-git-reset-soft/>Git多步悔棋</a></li><li class=mb2><a href=/posts/2014-05-27-how-pub-article/>Git文章发布方法</a></li><li class=mb2><a href=/posts/2016-06-23-git-commit-amend/>深入浅出'Git commit --amend'</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://petrie.github.io/>&copy; Petrie's Site 2022</a><div><div class=ananke-socials></div></div></div></footer></body></html>