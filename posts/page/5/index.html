<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Petrie's Site</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content><meta name=generator content="Hugo 0.99.1"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><link href=/posts/index.xml rel=alternate type=application/rss+xml title="Petrie's Site"><link href=/posts/index.xml rel=feed type=application/rss+xml title="Petrie's Site"><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://petrie.github.io/posts/"><meta itemprop=name content="Posts"><meta itemprop=description content><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content></head><body class="ma0 avenir bg-near-white"><header><div class="pb3-m pb6-l bg-black"><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Petrie's Site</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav><div class="tc-l pv3 ph3 ph4-ns"><h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">Posts</h1></div></div></header><main class=pb7 role=main><article class="pa3 pa4-ns nested-copy-line-height"><section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy mid-gray"></section><section class="flex-ns flex-wrap justify-around mt5"><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/2012-09-29-nginx-options/ class="link black dim">Nginx 启动选项</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Nginx 命令行参数和信号 选项 -c &lt;/path/to/config> 为nginx指定一个配置文件，来代替缺省的
t 不运行，而仅仅测试配置文件。nginx 将检查配置文件的语法的正确性，并尝试打开配置文件中所引用到的文件。
-v 显示nginx 的版本
-V 显示nginx 的版本，编译器版本和配置参数</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/2012-11-02-configure-nginx-pathinfo/ class="link black dim">Nginx配置PATHINFO</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">最近在学习php，《PHP和MySQL Web开发》零零碎碎的算是看完了，讲了一下基础的东西，对于入门是足够了。前几天开始些项目，是在先前别人的基础上写的，同时有事两个人一起写。完成之后看了看，代码太乱了，包括代码结构和命名规范。遂决定找点着方便的资料。
在网上搜来搜去，找到了篇挺不错的PHP框架（ThinkPHP）教程：http://www.thinkphp.cn/info/155.html 着实还不错，推荐学习PHP的同学看看。
这篇教程的默认环境是wamp的，由于我用的是Nginx，在学习第二篇的时候就遇到了问题。ThinkPHP支持的URL模式：PATHINFO Nginx默认配置是不支持的。本以为是自己ThinkPHP环境配置的问题，后来删了所有的相关文件（我的一贯作风&ndash;屡试不爽），重新配置ThinkPHP环境，可是还是同样的报404错误。这样的话只能是Nginx和php配置的问题了。
URL首先是通过Nginx解析的，先从Nginx下手。猜想Nginx是不是不支持ThinkPHP的PATHINFO呢。于是百度一下，便一目了然了。
试了几篇博文的方法，最后终于弄好了。
废话结束
打开Nginx的配置文件nginx.conf
在server中加入一下配置：
location ~ .php {
root d:/ThinkPHP/;
fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
fastcgi_pass 127.0.0.1:9000;
fastcgi_index index.php;
include fastcgi_params;
#pathinfo support
set $real_script_name $fastcgi_script_name;
set $path_info &ldquo;&rdquo;;
if ( $fastcgi_script_name ~ &ldquo;^(.+?.php)(/.+)$&rdquo;){
set $real_script_name $1;
set $path_info $2;
} fastcgi_param SCRIPT_NAME $real_script_name;
fastcgi_param PATH_INFO $path_info;
}
需要注意的是那个if判断语句，在(的前后都必须有空格，否则Nginx会报配置语法错误。</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/2013-09-03-strategy-pattern/ class="link black dim">Spring 资源访问剖析和策略模式应用</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">##Spring 资源访问剖析和策略模式应用##
http://www.ibm.com/developerworks/cn/java/j-lo-spring-resource/</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/2012-09-27-sqlserver-sql-manager/ class="link black dim">SQLServer 便捷管理多个服务器</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">哇 你好out，还在用2005. 发现自己博客有个特点（这才谢了几篇，就总结出特点了），就是没篇要介绍的东西都很少，一个命令、一个技巧，但我通常都能罗出一大堆。这不，今天又是这个节奏。
从我的优点说起 我的有点是什么呢？ 被某个东西折磨久了，就会主动去找一个便捷的代替方式。这次就是，SQL Server应该很多人都用过吧！好了不废话了，其实我要介绍两个东西。
1.“SQL Server 解决方案资源管理器”
2.SQL Server 下连接访问远程数据库
1.SQL Server 解决方案资源管理器 这个很简单，就是一个SQL Server的子窗口，只不过不常用SQL Server的人很难发现，工作原因我用的较多，就发现了。依次“视图”->“解决方案资源管理器”就出来了，就是这个窗口，你可以将相关的服务器和SQL文件保存在同一个解决方案里，这样找的时候十分的方便。
2.SQL Server 下连接访问远程数据库 简单来说其实就几条SQL语句。
exec sp_addlinkedserver 'myserver','','SQLOLEDB ','远程服务器名或ip地址' exec sp_addlinkedsrvlogin 'myserver','false',null,'username','password'
有了上面两句就可以直接远程操作数据库了：
select * from myserver.database.dbo.table;
就这样吧!
拾遗 参考文章</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/2012-10-19-linux-tar/ class="link black dim">Tar in Linux</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">将当前文件夹下的所有以.jpg为后缀的文件打包到all.tar.gz 压缩包内:
tar -czvf all.tar.gz * .jpg
将压缩文件all.tar.gz解压到文件夹dir下:
tar -xzvf all.tar.gz -C dir</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/2012-09-26-vim-define/ class="link black dim">vim 宏</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">##扯淡 用过Markdown的同学都应该知道，其换行语法为在行尾加两个空格。
今天在用Markdown写东西的时候，需要从txt文件中黏贴大量文本。如果我想让其正常的显示换行，就需要在每一行的末尾加上两个空格。一行行添加，太麻烦了，很自然的想到了vim。
利用vim中ctrl+v命令可以进行批量的修改。但是在操作的过程中我发现这个命令好像无法批量添加空格。没招了。
下午的时候不忙，遂在群里提出了这个问题，力哥给了回复，利用vim的宏功能（教程）。
试了一下，果断实现了这个需求，简单实用很不错。下面简单介绍一下：
##正题 打开vim，输入一下内容：
aaa
bbb
ccc
ddd
录入宏：
1.按下esc进入“指令模式” 。
2.按下q表示即将进入宏录入，之后按下任意a表示名字为‘a’的宏。
3.然后进行你想录入的操作，我这里是想在每行的末尾添加两个空格，所以我进行的操作是：
A #在行尾插入
space,space #两下空格，在行尾插入两行空格
esc #进入“指令模式”
j #光标移至下一行
完成，最后重要的一步，退出宏录制，很简单，键入q。
到此，我需要录制的宏已经完成，接下来只需要重复执行这个宏就能实现我的需求。
我这里需要执行4次，我只要输入4@a，便可将名为2的宏执行4次。其中@之前是次数，@之后是宏的名字。 是不是很简单。
##拾遗 普通人的编辑利器——Vim
Vim的三种模式</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/2015-03-25-my-vim-plugin/ class="link black dim">VIM 插件</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">NERDTree
neocomplcache</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/2013-08-29-vim-advanced-1/ class="link black dim">Vim 进阶1</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">##Vim 进阶[1]##
:g/pattern 寻找（移动）文件中最后一次出现pattern的地方。
:g/pattern/p 寻找并显示文件中所有包含pattern的行
:x 写入文件同时离开编辑器。只有文件被修改过时才会写入。
:g/pattern/s/old/new/g这种语法让你搜索一个模式，在找到包含模式的某一行时，对另外一个字符做替换。
vaw 选中当前单词
vawp 选中当前单词并用寄存器中的覆盖</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/2014-03-06-vim-copy-mv-delete/ class="link black dim">Vim快速选中、删除、复制引号或括号中的内容</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">http://www.Linuxsong.org/2010/09/vim-quick-select-copy-delete/</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Posts</span><h1 class="f3 near-black"><a href=/posts/2012-09-18-linux-yum-iso/ class="link black dim">利用CentOS.ISO配置本地yum源</a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">#扯淡# 公司的网络要用代理，许多非常cool的东西都玩不了，真垃圾。
组长让搞一个LNMP的教程。
上次在开发机上乱搞，把LNMP搞乱了，程序不能运行，调了好久，最后只好请来别的组的一位大神才解决。谁让自己是LNMP菜鸟呢!组里也都是做.Net的
从此我就不敢再在开发机上乱弄了。 （这事才几天，缓缓再说）。
开发联网上网不用通过代理，用起来爽啊，装点啥直接yum。
这几天还得把LNMP教程弄出来。
用不了开发机，只能在本机折腾了，先装Mysql，源码安装要用到cmake，不能用yum（不能上网），自己找依赖吧。
本想依赖最多有1，2层吧，可是事实不是这样，各种深度，各种广度啊。果断改变策略。想起以前在uplooking学Linux的时候老师曾教过本地yum配置。所幸试一试。
废话了这么多终于要进入正题了&mldr;
#正题# 1.将下好的dvdiso复制到虚拟机的 /home/petrie/ 下并重命名为centos.iso。此时iso的目录为/home/petrie/centos.iso
2.将dvdiso文件绑定到目录/mnt/centos_iso
mkdir /mnt/centos_iso
mount -o loop /home/petrie/centos.iso /mnt/centos_iso
好了，现在光盘中的rpm都可以用来安装了，但是这能安装那些没有依赖的，有依赖的要自行处理，接下来要安装的东西后面会用到，十分幸运，她没有依赖
3.安装配置软件
cd /mnt/centos_iso/CentOS
rpm -ivh createrepo-0.4.11-3.el5.noarch.rpm
4.运行createrepo
cd /mnt
createrepo ./ 这个过程挺长的2，3分钟吧
5.修改配置
cd /etc/yum.repos.d/
vim dvdiso.repo
在dvdiso.repo中写入以下内容：
[DVDISO]
name=DVD ISO
baseurl=file:///mnt/
enabled=1
gpgcheck=0
注意：步骤5 需要将/etc/yum.repos.d/下的文件清空，也就是说/etc/yum.repos.d/下只能有dvdiso.repo文件
这就好了，执行 yum clean all;yum list,执行成功则说明配置成功了。 赶紧装个软件试试吧~ pretty cool！ huh~</div></div></div></div></section><ul class="pagination pagination-default"><li class=page-item><a href=/posts/ aria-label=First class=page-link role=button><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/posts/page/4/ aria-label=Previous class=page-link role=button><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a href=/posts/page/2/ aria-label="Page 2" class=page-link role=button>2</a></li><li class=page-item><a href=/posts/page/3/ aria-label="Page 3" class=page-link role=button>3</a></li><li class=page-item><a href=/posts/page/4/ aria-label="Page 4" class=page-link role=button>4</a></li><li class="page-item active"><a aria-current=page aria-label="Page 5" class=page-link role=button>5</a></li><li class=page-item><a href=/posts/page/6/ aria-label="Page 6" class=page-link role=button>6</a></li><li class=page-item><a href=/posts/page/6/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/posts/page/6/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://petrie.github.io/>&copy; Petrie's Site 2022</a><div><div class=ananke-socials></div></div></div></footer></body></html>