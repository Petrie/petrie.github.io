<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Nginx配置PATHINFO | Petrie's Site</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Nginx默认的配置是不支持PATHINFO的，今天遇到了这个问题，记录下解决方法"><meta name=generator content="Hugo 0.99.1"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Nginx配置PATHINFO"><meta property="og:description" content="Nginx默认的配置是不支持PATHINFO的，今天遇到了这个问题，记录下解决方法"><meta property="og:type" content="article"><meta property="og:url" content="https://petrie.github.io/posts/2012-11-02-configure-nginx-pathinfo/"><meta property="article:section" content="posts"><meta itemprop=name content="Nginx配置PATHINFO"><meta itemprop=description content="Nginx默认的配置是不支持PATHINFO的，今天遇到了这个问题，记录下解决方法"><meta itemprop=wordCount content="54"><meta itemprop=keywords content="Nginx,ThinkPHP,PATHINFO,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Nginx配置PATHINFO"><meta name=twitter:description content="Nginx默认的配置是不支持PATHINFO的，今天遇到了这个问题，记录下解决方法"></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Petrie's Site</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">POSTS</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Nginx配置PATHINFO</h1></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>最近在学习php，《PHP和MySQL
Web开发》零零碎碎的算是看完了，讲了一下基础的东西，对于入门是足够了。前几天开始些项目，是在先前别人的基础上写的，同时有事两个人一起写。完成之后看了看，代码太乱了，包括代码结构和命名规范。遂决定找点着方便的资料。<br>在网上搜来搜去，找到了篇挺不错的PHP框架（ThinkPHP）教程：http://www.thinkphp.cn/info/155.html
着实还不错，推荐学习PHP的同学看看。<br>这篇教程的默认环境是wamp的，由于我用的是Nginx，在学习第二篇的时候就遇到了问题。ThinkPHP支持的URL模式：PATHINFO
Nginx默认配置是不支持的。本以为是自己ThinkPHP环境配置的问题，后来删了所有的相关文件（我的一贯作风&ndash;屡试不爽），重新配置ThinkPHP环境，可是还是同样的报404错误。这样的话只能是Nginx和php配置的问题了。<br>URL首先是通过Nginx解析的，先从Nginx下手。猜想Nginx是不是不支持ThinkPHP的PATHINFO呢。于是百度一下，便一目了然了。<br>试了几篇博文的方法，最后终于弄好了。<br><strong>废话结束</strong><br>打开Nginx的配置文件nginx.conf<br>在server中加入一下配置：</p><blockquote><p>location ~ .php {<br>root d:/ThinkPHP/;<br>fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;<br>fastcgi_pass 127.0.0.1:9000;<br>fastcgi_index index.php;<br>include fastcgi_params;<br>#pathinfo support<br>set $real_script_name $fastcgi_script_name;<br>set $path_info &ldquo;&rdquo;;<br>if ( $fastcgi_script_name ~ &ldquo;^(.+?.php)(/.+)$&rdquo;){<br>set $real_script_name $1;<br>set $path_info $2;<br>}
fastcgi_param SCRIPT_NAME $real_script_name;<br>fastcgi_param PATH_INFO $path_info;<br>}</p></blockquote><p><strong>需要注意的是那个if判断语句，在(的前后都必须有空格，否则Nginx会报配置语法错误。</strong></p><ul class=pa0><li class="list di"><a href=/tags/nginx class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Nginx</a></li><li class="list di"><a href=/tags/thinkphp class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">ThinkPHP</a></li><li class="list di"><a href=/tags/pathinfo class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">PATHINFO</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/posts/2012-09-29-nginx-options/>Nginx 启动选项</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://petrie.github.io/>&copy; Petrie's Site 2022</a><div><div class=ananke-socials></div></div></div></footer></body></html>